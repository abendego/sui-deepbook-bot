{
  "version": 3,
  "sources": ["../../../../src/contracts/deepbook/registry.ts"],
  "sourcesContent": ["// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\n/** Registry holds all created pools. */\n\nimport { MoveStruct, normalizeMoveArguments } from '../utils/index.js';\nimport type { RawTransactionArgument } from '../utils/index.js';\nimport { bcs } from '@mysten/sui/bcs';\nimport type { Transaction } from '@mysten/sui/transactions';\nimport * as object from './deps/sui/object.js';\nimport * as versioned from './deps/sui/versioned.js';\nimport * as vec_set from './deps/sui/vec_set.js';\nimport * as bag from './deps/sui/bag.js';\nimport * as type_name from './deps/std/type_name.js';\nconst $moduleName = '@deepbook/core::registry';\nexport const REGISTRY = new MoveStruct({\n\tname: `${$moduleName}::REGISTRY`,\n\tfields: {\n\t\tdummy_field: bcs.bool(),\n\t},\n});\nexport const DeepbookAdminCap = new MoveStruct({\n\tname: `${$moduleName}::DeepbookAdminCap`,\n\tfields: {\n\t\tid: object.UID,\n\t},\n});\nexport const Registry = new MoveStruct({\n\tname: `${$moduleName}::Registry`,\n\tfields: {\n\t\tid: object.UID,\n\t\tinner: versioned.Versioned,\n\t},\n});\nexport const RegistryInner = new MoveStruct({\n\tname: `${$moduleName}::RegistryInner`,\n\tfields: {\n\t\tallowed_versions: vec_set.VecSet(bcs.u64()),\n\t\tpools: bag.Bag,\n\t\ttreasury_address: bcs.Address,\n\t},\n});\nexport const PoolKey = new MoveStruct({\n\tname: `${$moduleName}::PoolKey`,\n\tfields: {\n\t\tbase: type_name.TypeName,\n\t\tquote: type_name.TypeName,\n\t},\n});\nexport const StableCoinKey = new MoveStruct({\n\tname: `${$moduleName}::StableCoinKey`,\n\tfields: {\n\t\tdummy_field: bcs.bool(),\n\t},\n});\nexport interface SetTreasuryAddressArguments {\n\tself: RawTransactionArgument<string>;\n\ttreasuryAddress: RawTransactionArgument<string>;\n\tCap: RawTransactionArgument<string>;\n}\nexport interface SetTreasuryAddressOptions {\n\tpackage?: string;\n\targuments:\n\t\t| SetTreasuryAddressArguments\n\t\t| [\n\t\t\t\tself: RawTransactionArgument<string>,\n\t\t\t\ttreasuryAddress: RawTransactionArgument<string>,\n\t\t\t\tCap: RawTransactionArgument<string>,\n\t\t  ];\n}\n/**\n * Sets the treasury address where the pool creation fees are sent By default, the\n * treasury address is the publisher of the deepbook package\n */\nexport function setTreasuryAddress(options: SetTreasuryAddressOptions) {\n\tconst packageAddress = options.package ?? '@deepbook/core';\n\tconst argumentsTypes = [\n\t\t`${packageAddress}::registry::Registry`,\n\t\t'address',\n\t\t`${packageAddress}::registry::DeepbookAdminCap`,\n\t] satisfies string[];\n\tconst parameterNames = ['self', 'treasuryAddress', 'Cap'];\n\treturn (tx: Transaction) =>\n\t\ttx.moveCall({\n\t\t\tpackage: packageAddress,\n\t\t\tmodule: 'registry',\n\t\t\tfunction: 'set_treasury_address',\n\t\t\targuments: normalizeMoveArguments(options.arguments, argumentsTypes, parameterNames),\n\t\t});\n}\nexport interface EnableVersionArguments {\n\tself: RawTransactionArgument<string>;\n\tversion: RawTransactionArgument<number | bigint>;\n\tCap: RawTransactionArgument<string>;\n}\nexport interface EnableVersionOptions {\n\tpackage?: string;\n\targuments:\n\t\t| EnableVersionArguments\n\t\t| [\n\t\t\t\tself: RawTransactionArgument<string>,\n\t\t\t\tversion: RawTransactionArgument<number | bigint>,\n\t\t\t\tCap: RawTransactionArgument<string>,\n\t\t  ];\n}\n/**\n * Enables a package version Only Admin can enable a package version This function\n * does not have version restrictions\n */\nexport function enableVersion(options: EnableVersionOptions) {\n\tconst packageAddress = options.package ?? '@deepbook/core';\n\tconst argumentsTypes = [\n\t\t`${packageAddress}::registry::Registry`,\n\t\t'u64',\n\t\t`${packageAddress}::registry::DeepbookAdminCap`,\n\t] satisfies string[];\n\tconst parameterNames = ['self', 'version', 'Cap'];\n\treturn (tx: Transaction) =>\n\t\ttx.moveCall({\n\t\t\tpackage: packageAddress,\n\t\t\tmodule: 'registry',\n\t\t\tfunction: 'enable_version',\n\t\t\targuments: normalizeMoveArguments(options.arguments, argumentsTypes, parameterNames),\n\t\t});\n}\nexport interface DisableVersionArguments {\n\tself: RawTransactionArgument<string>;\n\tversion: RawTransactionArgument<number | bigint>;\n\tCap: RawTransactionArgument<string>;\n}\nexport interface DisableVersionOptions {\n\tpackage?: string;\n\targuments:\n\t\t| DisableVersionArguments\n\t\t| [\n\t\t\t\tself: RawTransactionArgument<string>,\n\t\t\t\tversion: RawTransactionArgument<number | bigint>,\n\t\t\t\tCap: RawTransactionArgument<string>,\n\t\t  ];\n}\n/**\n * Disables a package version Only Admin can disable a package version This\n * function does not have version restrictions\n */\nexport function disableVersion(options: DisableVersionOptions) {\n\tconst packageAddress = options.package ?? '@deepbook/core';\n\tconst argumentsTypes = [\n\t\t`${packageAddress}::registry::Registry`,\n\t\t'u64',\n\t\t`${packageAddress}::registry::DeepbookAdminCap`,\n\t] satisfies string[];\n\tconst parameterNames = ['self', 'version', 'Cap'];\n\treturn (tx: Transaction) =>\n\t\ttx.moveCall({\n\t\t\tpackage: packageAddress,\n\t\t\tmodule: 'registry',\n\t\t\tfunction: 'disable_version',\n\t\t\targuments: normalizeMoveArguments(options.arguments, argumentsTypes, parameterNames),\n\t\t});\n}\nexport interface AddStablecoinArguments {\n\tself: RawTransactionArgument<string>;\n\tCap: RawTransactionArgument<string>;\n}\nexport interface AddStablecoinOptions {\n\tpackage?: string;\n\targuments:\n\t\t| AddStablecoinArguments\n\t\t| [self: RawTransactionArgument<string>, Cap: RawTransactionArgument<string>];\n\ttypeArguments: [string];\n}\n/** Adds a stablecoin to the whitelist Only Admin can add stablecoin */\nexport function addStablecoin(options: AddStablecoinOptions) {\n\tconst packageAddress = options.package ?? '@deepbook/core';\n\tconst argumentsTypes = [\n\t\t`${packageAddress}::registry::Registry`,\n\t\t`${packageAddress}::registry::DeepbookAdminCap`,\n\t] satisfies string[];\n\tconst parameterNames = ['self', 'Cap'];\n\treturn (tx: Transaction) =>\n\t\ttx.moveCall({\n\t\t\tpackage: packageAddress,\n\t\t\tmodule: 'registry',\n\t\t\tfunction: 'add_stablecoin',\n\t\t\targuments: normalizeMoveArguments(options.arguments, argumentsTypes, parameterNames),\n\t\t\ttypeArguments: options.typeArguments,\n\t\t});\n}\nexport interface RemoveStablecoinArguments {\n\tself: RawTransactionArgument<string>;\n\tCap: RawTransactionArgument<string>;\n}\nexport interface RemoveStablecoinOptions {\n\tpackage?: string;\n\targuments:\n\t\t| RemoveStablecoinArguments\n\t\t| [self: RawTransactionArgument<string>, Cap: RawTransactionArgument<string>];\n\ttypeArguments: [string];\n}\n/** Removes a stablecoin from the whitelist Only Admin can remove stablecoin */\nexport function removeStablecoin(options: RemoveStablecoinOptions) {\n\tconst packageAddress = options.package ?? '@deepbook/core';\n\tconst argumentsTypes = [\n\t\t`${packageAddress}::registry::Registry`,\n\t\t`${packageAddress}::registry::DeepbookAdminCap`,\n\t] satisfies string[];\n\tconst parameterNames = ['self', 'Cap'];\n\treturn (tx: Transaction) =>\n\t\ttx.moveCall({\n\t\t\tpackage: packageAddress,\n\t\t\tmodule: 'registry',\n\t\t\tfunction: 'remove_stablecoin',\n\t\t\targuments: normalizeMoveArguments(options.arguments, argumentsTypes, parameterNames),\n\t\t\ttypeArguments: options.typeArguments,\n\t\t});\n}\nexport interface IsStablecoinArguments {\n\tself: RawTransactionArgument<string>;\n\tstableType: RawTransactionArgument<string>;\n}\nexport interface IsStablecoinOptions {\n\tpackage?: string;\n\targuments:\n\t\t| IsStablecoinArguments\n\t\t| [self: RawTransactionArgument<string>, stableType: RawTransactionArgument<string>];\n}\n/** Returns whether the given coin is whitelisted */\nexport function isStablecoin(options: IsStablecoinOptions) {\n\tconst packageAddress = options.package ?? '@deepbook/core';\n\tconst argumentsTypes = [\n\t\t`${packageAddress}::registry::Registry`,\n\t\t'0x0000000000000000000000000000000000000000000000000000000000000001::type_name::TypeName',\n\t] satisfies string[];\n\tconst parameterNames = ['self', 'stableType'];\n\treturn (tx: Transaction) =>\n\t\ttx.moveCall({\n\t\t\tpackage: packageAddress,\n\t\t\tmodule: 'registry',\n\t\t\tfunction: 'is_stablecoin',\n\t\t\targuments: normalizeMoveArguments(options.arguments, argumentsTypes, parameterNames),\n\t\t});\n}\n"],
  "mappings": "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",
  "names": []
}
