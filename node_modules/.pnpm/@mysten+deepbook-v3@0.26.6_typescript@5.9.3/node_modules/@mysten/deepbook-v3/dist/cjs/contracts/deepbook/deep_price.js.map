{
  "version": 3,
  "sources": ["../../../../src/contracts/deepbook/deep_price.ts"],
  "sourcesContent": ["// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\n/**\n * DEEP price module. This module maintains the conversion rate between DEEP and\n * the base and quote assets.\n */\n\nimport { MoveStruct, normalizeMoveArguments } from '../utils/index.js';\nimport type { RawTransactionArgument } from '../utils/index.js';\nimport { bcs } from '@mysten/sui/bcs';\nimport type { Transaction } from '@mysten/sui/transactions';\nconst $moduleName = '@deepbook/core::deep_price';\nexport const Price = new MoveStruct({\n\tname: `${$moduleName}::Price`,\n\tfields: {\n\t\tconversion_rate: bcs.u64(),\n\t\ttimestamp: bcs.u64(),\n\t},\n});\nexport const PriceAdded = new MoveStruct({\n\tname: `${$moduleName}::PriceAdded`,\n\tfields: {\n\t\tconversion_rate: bcs.u64(),\n\t\ttimestamp: bcs.u64(),\n\t\tis_base_conversion: bcs.bool(),\n\t\treference_pool: bcs.Address,\n\t\ttarget_pool: bcs.Address,\n\t},\n});\nexport const DeepPrice = new MoveStruct({\n\tname: `${$moduleName}::DeepPrice`,\n\tfields: {\n\t\tbase_prices: bcs.vector(Price),\n\t\tcumulative_base: bcs.u64(),\n\t\tquote_prices: bcs.vector(Price),\n\t\tcumulative_quote: bcs.u64(),\n\t},\n});\nexport const OrderDeepPrice = new MoveStruct({\n\tname: `${$moduleName}::OrderDeepPrice`,\n\tfields: {\n\t\tasset_is_base: bcs.bool(),\n\t\tdeep_per_asset: bcs.u64(),\n\t},\n});\nexport interface AssetIsBaseArguments {\n\tself: RawTransactionArgument<string>;\n}\nexport interface AssetIsBaseOptions {\n\tpackage?: string;\n\targuments: AssetIsBaseArguments | [self: RawTransactionArgument<string>];\n}\nexport function assetIsBase(options: AssetIsBaseOptions) {\n\tconst packageAddress = options.package ?? '@deepbook/core';\n\tconst argumentsTypes = [`${packageAddress}::deep_price::OrderDeepPrice`] satisfies string[];\n\tconst parameterNames = ['self'];\n\treturn (tx: Transaction) =>\n\t\ttx.moveCall({\n\t\t\tpackage: packageAddress,\n\t\t\tmodule: 'deep_price',\n\t\t\tfunction: 'asset_is_base',\n\t\t\targuments: normalizeMoveArguments(options.arguments, argumentsTypes, parameterNames),\n\t\t});\n}\nexport interface DeepPerAssetArguments {\n\tself: RawTransactionArgument<string>;\n}\nexport interface DeepPerAssetOptions {\n\tpackage?: string;\n\targuments: DeepPerAssetArguments | [self: RawTransactionArgument<string>];\n}\nexport function deepPerAsset(options: DeepPerAssetOptions) {\n\tconst packageAddress = options.package ?? '@deepbook/core';\n\tconst argumentsTypes = [`${packageAddress}::deep_price::OrderDeepPrice`] satisfies string[];\n\tconst parameterNames = ['self'];\n\treturn (tx: Transaction) =>\n\t\ttx.moveCall({\n\t\t\tpackage: packageAddress,\n\t\t\tmodule: 'deep_price',\n\t\t\tfunction: 'deep_per_asset',\n\t\t\targuments: normalizeMoveArguments(options.arguments, argumentsTypes, parameterNames),\n\t\t});\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,mBAAmD;AAEnD,iBAAoB;AAEpB,MAAM,cAAc;AACb,MAAM,QAAQ,IAAI,wBAAW;AAAA,EACnC,MAAM,GAAG,WAAW;AAAA,EACpB,QAAQ;AAAA,IACP,iBAAiB,eAAI,IAAI;AAAA,IACzB,WAAW,eAAI,IAAI;AAAA,EACpB;AACD,CAAC;AACM,MAAM,aAAa,IAAI,wBAAW;AAAA,EACxC,MAAM,GAAG,WAAW;AAAA,EACpB,QAAQ;AAAA,IACP,iBAAiB,eAAI,IAAI;AAAA,IACzB,WAAW,eAAI,IAAI;AAAA,IACnB,oBAAoB,eAAI,KAAK;AAAA,IAC7B,gBAAgB,eAAI;AAAA,IACpB,aAAa,eAAI;AAAA,EAClB;AACD,CAAC;AACM,MAAM,YAAY,IAAI,wBAAW;AAAA,EACvC,MAAM,GAAG,WAAW;AAAA,EACpB,QAAQ;AAAA,IACP,aAAa,eAAI,OAAO,KAAK;AAAA,IAC7B,iBAAiB,eAAI,IAAI;AAAA,IACzB,cAAc,eAAI,OAAO,KAAK;AAAA,IAC9B,kBAAkB,eAAI,IAAI;AAAA,EAC3B;AACD,CAAC;AACM,MAAM,iBAAiB,IAAI,wBAAW;AAAA,EAC5C,MAAM,GAAG,WAAW;AAAA,EACpB,QAAQ;AAAA,IACP,eAAe,eAAI,KAAK;AAAA,IACxB,gBAAgB,eAAI,IAAI;AAAA,EACzB;AACD,CAAC;AAQM,SAAS,YAAY,SAA6B;AACxD,QAAM,iBAAiB,QAAQ,WAAW;AAC1C,QAAM,iBAAiB,CAAC,GAAG,cAAc,8BAA8B;AACvE,QAAM,iBAAiB,CAAC,MAAM;AAC9B,SAAO,CAAC,OACP,GAAG,SAAS;AAAA,IACX,SAAS;AAAA,IACT,QAAQ;AAAA,IACR,UAAU;AAAA,IACV,eAAW,qCAAuB,QAAQ,WAAW,gBAAgB,cAAc;AAAA,EACpF,CAAC;AACH;AAQO,SAAS,aAAa,SAA8B;AAC1D,QAAM,iBAAiB,QAAQ,WAAW;AAC1C,QAAM,iBAAiB,CAAC,GAAG,cAAc,8BAA8B;AACvE,QAAM,iBAAiB,CAAC,MAAM;AAC9B,SAAO,CAAC,OACP,GAAG,SAAS;AAAA,IACX,SAAS;AAAA,IACT,QAAQ;AAAA,IACR,UAAU;AAAA,IACV,eAAW,qCAAuB,QAAQ,WAAW,gBAAgB,cAAc;AAAA,EACpF,CAAC;AACH;",
  "names": []
}
