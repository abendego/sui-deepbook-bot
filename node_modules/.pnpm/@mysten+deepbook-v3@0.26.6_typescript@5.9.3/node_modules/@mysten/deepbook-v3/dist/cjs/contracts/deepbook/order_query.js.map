{
  "version": 3,
  "sources": ["../../../../src/contracts/deepbook/order_query.ts"],
  "sourcesContent": ["// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\n/**\n * This module defines the OrderPage struct and its methods to iterate over orders\n * in a pool.\n */\n\nimport { MoveStruct, normalizeMoveArguments } from '../utils/index.js';\nimport type { RawTransactionArgument } from '../utils/index.js';\nimport { bcs } from '@mysten/sui/bcs';\nimport type { Transaction } from '@mysten/sui/transactions';\nimport * as order from './order.js';\nconst $moduleName = '@deepbook/core::order_query';\nexport const OrderPage = new MoveStruct({\n\tname: `${$moduleName}::OrderPage`,\n\tfields: {\n\t\torders: bcs.vector(order.Order),\n\t\thas_next_page: bcs.bool(),\n\t},\n});\nexport interface IterOrdersArguments {\n\tself: RawTransactionArgument<string>;\n\tstartOrderId: RawTransactionArgument<number | bigint | null>;\n\tendOrderId: RawTransactionArgument<number | bigint | null>;\n\tminExpireTimestamp: RawTransactionArgument<number | bigint | null>;\n\tlimit: RawTransactionArgument<number | bigint>;\n\tbids: RawTransactionArgument<boolean>;\n}\nexport interface IterOrdersOptions {\n\tpackage?: string;\n\targuments:\n\t\t| IterOrdersArguments\n\t\t| [\n\t\t\t\tself: RawTransactionArgument<string>,\n\t\t\t\tstartOrderId: RawTransactionArgument<number | bigint | null>,\n\t\t\t\tendOrderId: RawTransactionArgument<number | bigint | null>,\n\t\t\t\tminExpireTimestamp: RawTransactionArgument<number | bigint | null>,\n\t\t\t\tlimit: RawTransactionArgument<number | bigint>,\n\t\t\t\tbids: RawTransactionArgument<boolean>,\n\t\t  ];\n\ttypeArguments: [string, string];\n}\n/**\n * Bid minimum order id has 0 for its first bit, 0 for next 63 bits for price, and\n * 1 for next 64 bits for order id. Ask minimum order id has 1 for its first bit, 0\n * for next 63 bits for price, and 0 for next 64 bits for order id. Bids are\n * iterated from high to low order id, and asks are iterated from low to high order\n * id.\n */\nexport function iterOrders(options: IterOrdersOptions) {\n\tconst packageAddress = options.package ?? '@deepbook/core';\n\tconst argumentsTypes = [\n\t\t`${packageAddress}::pool::Pool<${options.typeArguments[0]}, ${options.typeArguments[1]}>`,\n\t\t'0x0000000000000000000000000000000000000000000000000000000000000001::option::Option<u128>',\n\t\t'0x0000000000000000000000000000000000000000000000000000000000000001::option::Option<u128>',\n\t\t'0x0000000000000000000000000000000000000000000000000000000000000001::option::Option<u64>',\n\t\t'u64',\n\t\t'bool',\n\t] satisfies string[];\n\tconst parameterNames = [\n\t\t'self',\n\t\t'startOrderId',\n\t\t'endOrderId',\n\t\t'minExpireTimestamp',\n\t\t'limit',\n\t\t'bids',\n\t];\n\treturn (tx: Transaction) =>\n\t\ttx.moveCall({\n\t\t\tpackage: packageAddress,\n\t\t\tmodule: 'order_query',\n\t\t\tfunction: 'iter_orders',\n\t\t\targuments: normalizeMoveArguments(options.arguments, argumentsTypes, parameterNames),\n\t\t\ttypeArguments: options.typeArguments,\n\t\t});\n}\nexport interface OrdersArguments {\n\tself: RawTransactionArgument<string>;\n}\nexport interface OrdersOptions {\n\tpackage?: string;\n\targuments: OrdersArguments | [self: RawTransactionArgument<string>];\n}\nexport function orders(options: OrdersOptions) {\n\tconst packageAddress = options.package ?? '@deepbook/core';\n\tconst argumentsTypes = [`${packageAddress}::order_query::OrderPage`] satisfies string[];\n\tconst parameterNames = ['self'];\n\treturn (tx: Transaction) =>\n\t\ttx.moveCall({\n\t\t\tpackage: packageAddress,\n\t\t\tmodule: 'order_query',\n\t\t\tfunction: 'orders',\n\t\t\targuments: normalizeMoveArguments(options.arguments, argumentsTypes, parameterNames),\n\t\t});\n}\nexport interface HasNextPageArguments {\n\tself: RawTransactionArgument<string>;\n}\nexport interface HasNextPageOptions {\n\tpackage?: string;\n\targuments: HasNextPageArguments | [self: RawTransactionArgument<string>];\n}\nexport function hasNextPage(options: HasNextPageOptions) {\n\tconst packageAddress = options.package ?? '@deepbook/core';\n\tconst argumentsTypes = [`${packageAddress}::order_query::OrderPage`] satisfies string[];\n\tconst parameterNames = ['self'];\n\treturn (tx: Transaction) =>\n\t\ttx.moveCall({\n\t\t\tpackage: packageAddress,\n\t\t\tmodule: 'order_query',\n\t\t\tfunction: 'has_next_page',\n\t\t\targuments: normalizeMoveArguments(options.arguments, argumentsTypes, parameterNames),\n\t\t});\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA,mBAAmD;AAEnD,iBAAoB;AAEpB,YAAuB;AACvB,MAAM,cAAc;AACb,MAAM,YAAY,IAAI,wBAAW;AAAA,EACvC,MAAM,GAAG,WAAW;AAAA,EACpB,QAAQ;AAAA,IACP,QAAQ,eAAI,OAAO,MAAM,KAAK;AAAA,IAC9B,eAAe,eAAI,KAAK;AAAA,EACzB;AACD,CAAC;AA8BM,SAAS,WAAW,SAA4B;AACtD,QAAM,iBAAiB,QAAQ,WAAW;AAC1C,QAAM,iBAAiB;AAAA,IACtB,GAAG,cAAc,gBAAgB,QAAQ,cAAc,CAAC,CAAC,KAAK,QAAQ,cAAc,CAAC,CAAC;AAAA,IACtF;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD;AACA,QAAM,iBAAiB;AAAA,IACtB;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD;AACA,SAAO,CAAC,OACP,GAAG,SAAS;AAAA,IACX,SAAS;AAAA,IACT,QAAQ;AAAA,IACR,UAAU;AAAA,IACV,eAAW,qCAAuB,QAAQ,WAAW,gBAAgB,cAAc;AAAA,IACnF,eAAe,QAAQ;AAAA,EACxB,CAAC;AACH;AAQO,SAAS,OAAO,SAAwB;AAC9C,QAAM,iBAAiB,QAAQ,WAAW;AAC1C,QAAM,iBAAiB,CAAC,GAAG,cAAc,0BAA0B;AACnE,QAAM,iBAAiB,CAAC,MAAM;AAC9B,SAAO,CAAC,OACP,GAAG,SAAS;AAAA,IACX,SAAS;AAAA,IACT,QAAQ;AAAA,IACR,UAAU;AAAA,IACV,eAAW,qCAAuB,QAAQ,WAAW,gBAAgB,cAAc;AAAA,EACpF,CAAC;AACH;AAQO,SAAS,YAAY,SAA6B;AACxD,QAAM,iBAAiB,QAAQ,WAAW;AAC1C,QAAM,iBAAiB,CAAC,GAAG,cAAc,0BAA0B;AACnE,QAAM,iBAAiB,CAAC,MAAM;AAC9B,SAAO,CAAC,OACP,GAAG,SAAS;AAAA,IACX,SAAS;AAAA,IACT,QAAQ;AAAA,IACR,UAAU;AAAA,IACV,eAAW,qCAAuB,QAAQ,WAAW,gBAAgB,cAAc;AAAA,EACpF,CAAC;AACH;",
  "names": []
}
