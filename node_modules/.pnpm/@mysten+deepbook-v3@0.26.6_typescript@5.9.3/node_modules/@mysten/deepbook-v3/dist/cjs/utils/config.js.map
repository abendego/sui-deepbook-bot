{
  "version": 3,
  "sources": ["../../../src/utils/config.ts"],
  "sourcesContent": ["// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\nimport { normalizeSuiAddress } from '@mysten/sui/utils';\n\nimport { BalanceManagerContract } from '../transactions/balanceManager.js';\nimport type {\n\tBalanceManager,\n\tEnvironment,\n\tMarginManager,\n\tCoin,\n\tPool,\n\tMarginPool,\n} from '../types/index.js';\nimport type { CoinMap, PoolMap, MarginPoolMap } from './constants.js';\nimport { ResourceNotFoundError, ErrorMessages } from './errors.js';\nimport {\n\tmainnetCoins,\n\tmainnetPackageIds,\n\tmainnetPools,\n\ttestnetCoins,\n\ttestnetPackageIds,\n\ttestnetPools,\n\tmainnetMarginPools,\n\ttestnetMarginPools,\n\tmainnetPythConfigs,\n\ttestnetPythConfigs,\n} from './constants.js';\n\n// Constants for numerical precision and scaling\nexport const FLOAT_SCALAR = 1_000_000_000; // 10^9 - Used for floating point representation\nexport const DEEP_SCALAR = 1_000_000; // 10^6 - DEEP token decimal places\n\n// Time-related constants\nexport const MAX_TIMESTAMP = 1_844_674_407_370_955_161n; // Maximum Unix timestamp (approximately year 2554)\nexport const PRICE_INFO_OBJECT_MAX_AGE_MS = 5_000; // 5 seconds in milliseconds\n\n// Transaction and fee constants\nexport const GAS_BUDGET = 250_000_000; // 0.25 SUI (0.5 * 500M MIST)\nexport const POOL_CREATION_FEE_DEEP = 500_000_000; // 500 DEEP tokens (500 * 10^6)\n\nexport class DeepBookConfig {\n\t#coins: CoinMap;\n\t#pools: PoolMap;\n\t#marginPools: MarginPoolMap;\n\tenv: Environment;\n\tbalanceManagers: { [key: string]: BalanceManager };\n\tmarginManagers: { [key: string]: MarginManager };\n\taddress: string;\n\tpyth: {\n\t\tpythStateId: string;\n\t\twormholeStateId: string;\n\t};\n\n\tDEEPBOOK_PACKAGE_ID: string;\n\tREGISTRY_ID: string;\n\tDEEP_TREASURY_ID: string;\n\tMARGIN_PACKAGE_ID: string;\n\tMARGIN_REGISTRY_ID: string;\n\tLIQUIDATION_PACKAGE_ID: string;\n\tadminCap?: string;\n\tmarginAdminCap?: string;\n\tmarginMaintainerCap?: string;\n\n\tbalanceManager: BalanceManagerContract;\n\n\tconstructor({\n\t\tenv,\n\t\taddress,\n\t\tadminCap,\n\t\tmarginAdminCap,\n\t\tmarginMaintainerCap,\n\t\tbalanceManagers,\n\t\tmarginManagers,\n\t\tcoins,\n\t\tpools,\n\t\tmarginPools,\n\t}: {\n\t\tenv: Environment;\n\t\taddress: string;\n\t\tadminCap?: string;\n\t\tmarginAdminCap?: string;\n\t\tmarginMaintainerCap?: string;\n\t\tbalanceManagers?: { [key: string]: BalanceManager };\n\t\tmarginManagers?: { [key: string]: MarginManager };\n\t\tcoins?: CoinMap;\n\t\tpools?: PoolMap;\n\t\tmarginPools?: MarginPoolMap;\n\t}) {\n\t\tthis.env = env;\n\t\tthis.address = normalizeSuiAddress(address);\n\t\tthis.adminCap = adminCap;\n\t\tthis.marginAdminCap = marginAdminCap;\n\t\tthis.marginMaintainerCap = marginMaintainerCap;\n\t\tthis.balanceManagers = balanceManagers || {};\n\t\tthis.marginManagers = marginManagers || {};\n\n\t\tif (env === 'mainnet') {\n\t\t\tthis.#coins = coins || mainnetCoins;\n\t\t\tthis.#pools = pools || mainnetPools;\n\t\t\tthis.#marginPools = marginPools || mainnetMarginPools;\n\t\t\tthis.DEEPBOOK_PACKAGE_ID = mainnetPackageIds.DEEPBOOK_PACKAGE_ID;\n\t\t\tthis.REGISTRY_ID = mainnetPackageIds.REGISTRY_ID;\n\t\t\tthis.DEEP_TREASURY_ID = mainnetPackageIds.DEEP_TREASURY_ID;\n\t\t\tthis.MARGIN_PACKAGE_ID = mainnetPackageIds.MARGIN_PACKAGE_ID;\n\t\t\tthis.MARGIN_REGISTRY_ID = mainnetPackageIds.MARGIN_REGISTRY_ID;\n\t\t\tthis.LIQUIDATION_PACKAGE_ID = mainnetPackageIds.LIQUIDATION_PACKAGE_ID;\n\t\t\tthis.pyth = mainnetPythConfigs;\n\t\t} else {\n\t\t\tthis.#coins = coins || testnetCoins;\n\t\t\tthis.#pools = pools || testnetPools;\n\t\t\tthis.#marginPools = marginPools || testnetMarginPools;\n\t\t\tthis.DEEPBOOK_PACKAGE_ID = testnetPackageIds.DEEPBOOK_PACKAGE_ID;\n\t\t\tthis.REGISTRY_ID = testnetPackageIds.REGISTRY_ID;\n\t\t\tthis.DEEP_TREASURY_ID = testnetPackageIds.DEEP_TREASURY_ID;\n\t\t\tthis.MARGIN_PACKAGE_ID = testnetPackageIds.MARGIN_PACKAGE_ID;\n\t\t\tthis.MARGIN_REGISTRY_ID = testnetPackageIds.MARGIN_REGISTRY_ID;\n\t\t\tthis.LIQUIDATION_PACKAGE_ID = testnetPackageIds.LIQUIDATION_PACKAGE_ID;\n\t\t\tthis.pyth = testnetPythConfigs;\n\t\t}\n\n\t\tthis.balanceManager = new BalanceManagerContract(this);\n\t}\n\n\t// Getters\n\tgetCoin(key: string): Coin {\n\t\tconst coin = this.#coins[key];\n\t\tif (!coin) {\n\t\t\tthrow new ResourceNotFoundError('Coin', key);\n\t\t}\n\n\t\treturn coin;\n\t}\n\n\tgetPool(key: string): Pool {\n\t\tconst pool = this.#pools[key];\n\t\tif (!pool) {\n\t\t\tthrow new ResourceNotFoundError('Pool', key);\n\t\t}\n\n\t\treturn pool;\n\t}\n\n\tgetMarginPool(key: string): MarginPool {\n\t\tconst pool = this.#marginPools[key];\n\t\tif (!pool) {\n\t\t\tthrow new ResourceNotFoundError('Margin pool', key);\n\t\t}\n\n\t\treturn pool;\n\t}\n\n\t/**\n\t * @description Get the balance manager by key\n\t * @param managerKey Key of the balance manager\n\t * @returns The BalanceManager object\n\t */\n\tgetBalanceManager(managerKey: string): BalanceManager {\n\t\tif (!Object.hasOwn(this.balanceManagers, managerKey)) {\n\t\t\tthrow new Error(ErrorMessages.BALANCE_MANAGER_NOT_FOUND(managerKey));\n\t\t}\n\n\t\treturn this.balanceManagers[managerKey];\n\t}\n\n\t/**\n\t * @description Get the margin manager by key\n\t * @param managerKey Key of the margin manager\n\t * @returns The MarginManager object\n\t */\n\tgetMarginManager(managerKey: string): MarginManager {\n\t\tif (!Object.hasOwn(this.marginManagers, managerKey)) {\n\t\t\tthrow new Error(ErrorMessages.MARGIN_MANAGER_NOT_FOUND(managerKey));\n\t\t}\n\n\t\treturn this.marginManagers[managerKey];\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA,mBAAoC;AAEpC,4BAAuC;AAUvC,oBAAqD;AACrD,uBAWO;AA1BP;AA6BO,MAAM,eAAe;AACrB,MAAM,cAAc;AAGpB,MAAM,gBAAgB;AACtB,MAAM,+BAA+B;AAGrC,MAAM,aAAa;AACnB,MAAM,yBAAyB;AAE/B,MAAM,eAAe;AAAA,EAyB3B,YAAY;AAAA,IACX;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EACD,GAWG;AA9CH;AACA;AACA;AA6CC,SAAK,MAAM;AACX,SAAK,cAAU,kCAAoB,OAAO;AAC1C,SAAK,WAAW;AAChB,SAAK,iBAAiB;AACtB,SAAK,sBAAsB;AAC3B,SAAK,kBAAkB,mBAAmB,CAAC;AAC3C,SAAK,iBAAiB,kBAAkB,CAAC;AAEzC,QAAI,QAAQ,WAAW;AACtB,yBAAK,QAAS,SAAS;AACvB,yBAAK,QAAS,SAAS;AACvB,yBAAK,cAAe,eAAe;AACnC,WAAK,sBAAsB,mCAAkB;AAC7C,WAAK,cAAc,mCAAkB;AACrC,WAAK,mBAAmB,mCAAkB;AAC1C,WAAK,oBAAoB,mCAAkB;AAC3C,WAAK,qBAAqB,mCAAkB;AAC5C,WAAK,yBAAyB,mCAAkB;AAChD,WAAK,OAAO;AAAA,IACb,OAAO;AACN,yBAAK,QAAS,SAAS;AACvB,yBAAK,QAAS,SAAS;AACvB,yBAAK,cAAe,eAAe;AACnC,WAAK,sBAAsB,mCAAkB;AAC7C,WAAK,cAAc,mCAAkB;AACrC,WAAK,mBAAmB,mCAAkB;AAC1C,WAAK,oBAAoB,mCAAkB;AAC3C,WAAK,qBAAqB,mCAAkB;AAC5C,WAAK,yBAAyB,mCAAkB;AAChD,WAAK,OAAO;AAAA,IACb;AAEA,SAAK,iBAAiB,IAAI,6CAAuB,IAAI;AAAA,EACtD;AAAA;AAAA,EAGA,QAAQ,KAAmB;AAC1B,UAAM,OAAO,mBAAK,QAAO,GAAG;AAC5B,QAAI,CAAC,MAAM;AACV,YAAM,IAAI,oCAAsB,QAAQ,GAAG;AAAA,IAC5C;AAEA,WAAO;AAAA,EACR;AAAA,EAEA,QAAQ,KAAmB;AAC1B,UAAM,OAAO,mBAAK,QAAO,GAAG;AAC5B,QAAI,CAAC,MAAM;AACV,YAAM,IAAI,oCAAsB,QAAQ,GAAG;AAAA,IAC5C;AAEA,WAAO;AAAA,EACR;AAAA,EAEA,cAAc,KAAyB;AACtC,UAAM,OAAO,mBAAK,cAAa,GAAG;AAClC,QAAI,CAAC,MAAM;AACV,YAAM,IAAI,oCAAsB,eAAe,GAAG;AAAA,IACnD;AAEA,WAAO;AAAA,EACR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,kBAAkB,YAAoC;AACrD,QAAI,CAAC,OAAO,OAAO,KAAK,iBAAiB,UAAU,GAAG;AACrD,YAAM,IAAI,MAAM,4BAAc,0BAA0B,UAAU,CAAC;AAAA,IACpE;AAEA,WAAO,KAAK,gBAAgB,UAAU;AAAA,EACvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,iBAAiB,YAAmC;AACnD,QAAI,CAAC,OAAO,OAAO,KAAK,gBAAgB,UAAU,GAAG;AACpD,YAAM,IAAI,MAAM,4BAAc,yBAAyB,UAAU,CAAC;AAAA,IACnE;AAEA,WAAO,KAAK,eAAe,UAAU;AAAA,EACtC;AACD;AAvIC;AACA;AACA;",
  "names": []
}
